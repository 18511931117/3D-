<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Mosaddek">
    <meta name="keyword" content="FlatLab, Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
    <link rel="shortcut icon" href="../img/favicon.html">

    <title>参数设置</title>

    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/bootstrap-reset.css" rel="stylesheet">
    <!--external css-->
    <link href="../assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <!-- Custom styles for this template -->
    <link href="../css/style.css" rel="stylesheet">
    <link href="../css/style-responsive.css" rel="stylesheet" />

    <link rel="stylesheet" href="https://www.layuicdn.com/layui-v2.5.5/css/layui.css">

    <style>

    </style>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 tooltipss and media queries -->
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->
</head>

<body>

<section id="container" class="">
    <!--header start-->
    <header class="header white-bg">
        <div class="sidebar-toggle-box">
            <div data-original-title="Toggle Navigation" data-placement="right" class="icon-reorder tooltips"></div>
        </div>
        <!--logo start-->
        <a href="#" class="logo" >江苏在线</a>
        <!--logo end-->
        <div class="top-nav ">
            <ul class="nav pull-right top-menu">
                <li>
                    <input type="text" class="form-control search" placeholder="Search">
                </li>
                <!-- user login dropdown start-->
                <li class="dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                        <img alt="" src="../img/avatar1_small.jpg">
                        <span class="username">Jhon Doue</span>
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu extended logout">
                        <div class="log-arrow-up"></div>
                        <li><a href="../login.html"><i class="icon-key"></i> Log Out</a></li>
                    </ul>
                </li>
                <!-- user login dropdown end -->
            </ul>
        </div>
    </header>
    <!--header end-->
    <!--sidebar start-->
    <aside>
        <div id="sidebar"  class="nav-collapse ">
            <!-- sidebar menu start-->
            <ul class="sidebar-menu">
                <li class="">
                    <a class="" href="../index.html">
                        <i class="icon-dashboard"></i>
                        <span>首页</span>
                    </a>
                </li>
                <li class="sub-menu">
                    <a href="javascript:;" class="">
                        <i class="icon-book"></i>
                        <span>设备管理</span>
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub">
                        <li><a class="" href="../label/general.html">设备信息管理</a></li>
                        <li><a class="" href="../label/buttons.html">设备标签管理</a></li>
                        <li><a class="" href="../label/widget.html">设备贴标</a></li>
                    </ul>
                </li>
                <li class="sub-menu">
                    <a href="javascript:;" class="">
                        <i class="icon-cogs"></i>
                        <span>线缆管理</span>
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub">
                        <li><a class="" href="../label2/grids.html">线缆信息管理</a></li>
                        <li><a class="" href="../label2/calendar.html">线缆标签管理</a></li>
                        <li><a class="" href="../label2/charts.html">线缆贴标</a></li>
                    </ul>
                </li>
                <li class="sub-menu">
                    <a href="javascript:;" class="">
                        <i class="icon-tasks"></i>
                        <span>任务管理</span>
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub">
                        <li><a class="" href="../task/form_component.html">盘点任务</a></li>
                        <li><a class="" href="../task/form_wizard.html">调拨任务</a></li>
                        <li><a class="" href="../task/form_validation.html">借用任务</a></li>
                        <li><a class="" href="../task/form_task.html">维修任务</a></li>
                        <li><a class="" href="../task/tabledetail.html">报废任务</a></li>
                    </ul>
                </li>
                <li class="sub-menu">
                    <a href="javascript:;" class="">
                        <i class="icon-th"></i>
                        <span>日志管理</span>
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub">
                        <li><a class="" href="../log/basic_table.html">盘点任务日志</a></li>
                        <li><a class="" href="../log/basic_table2.html">调拨任务日志</a></li>
                        <li><a class="" href="../log/basic_table3.html">借用任务日志</a></li>
                        <li><a class="" href="../log/basic_table4.html">维修任务日志</a></li>
                        <li><a class="" href="../log/basic_table5.html">操作日志</a></li>
                        <li><a class="" href="../log/basic_table6.html">告警日志</a></li>
                    </ul>
                </li>
                <li class="sub-menu active">
                    <a href="javascript:;" class="">
                        <i class="icon-glass"></i>
                        <span>系统管理</span>
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub">
                        <li><a class="" href="../system/blank.html">账号管理</a></li>
                        <li><a class="" href="../system/role.html">角色管理</a></li>
                        <li><a class="" href="../system/menu.html">菜单管理</a></li>
                        <li class="active"><a class="" href="../system/anti.html">参数设置</a></li>
                        <li><a class="" href="../system/profile.html">机构管理</a></li>
                        <li><a class="" href="../system/invoice.html">机房管理</a></li>
                        <li><a class="" href="../system/jjmangt.html">机架管理</a></li>
                        <li><a class="" href="../system/fenclass.html">设备分类管理</a></li>
                        <li><a class="" href="../system/lablemangt.html">标签管理</a></li>
                        <li><a class="" href="../system/3djfang.html">3D机房</a></li>
                        <li><a class="" href="../404.html">404 Error</a></li>
                        <li><a class="" href="../500.html">500 Error</a></li>
                    </ul>
                </li>
                <li>
                    <a class="" href="../login.html">
                        <i class="icon-user"></i>
                        <span>Login Page</span>
                    </a>
                </li>
            </ul>
            <!-- sidebar menu end-->
        </div>
    </aside>
    <!--sidebar end-->
    <!--main content start-->
    <section id="main-content">
        <section class="wrapper">
            <!-- invoice start-->
            <div class="row">
                <div class="col-lg-12">
                    <section class="panel">
                        <header class="panel-heading">
                            参数设置
                        </header>
                    </section>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <button type="submit" class="btn btn-success" data-toggle="modal" data-target="#myModal">添加系统参数</button>
                </div>
                <div class="col-sm-6">

                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <section class="panel">
                        <table class="layui-hide" id="test" lay-filter="test"></table>
                        <script type="text/html" id="barDemo">
                            <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
                        </script>
                    </section>
                </div>
            </div>

            <!-- invoice end-->
        </section>
    </section>
    <!--main content end-->
    <section>
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog" style="width: 60%">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                        <h4 class="modal-title" id="myModalLabel">
                            新建角色
                        </h4>
                    </div>
                    <div class="modal-body">
                        <form class="form-horizontal tasi-form" method="get">
                            <div class="form-group">
                                <label class="control-label col-lg-2">系统参数名称</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" placeholder="系统参数名称">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-lg-2">系统参数编码</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" placeholder="系统参数编码">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-lg-2">系统参数值</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" placeholder="系统参数值">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-lg-2">系统参数类型</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" placeholder="系统参数类型">
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                        </button>
                        <button type="button" class="btn btn-primary">
                            提交更改
                        </button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>
        <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog" style="padding: 15px;width: 100%">
                <div class="modal-content">
                    <div class="modal-body">
                        <form class="form-horizontal tasi-form" method="get">
                            <div class="form-group">
                                <label class="control-label col-lg-2">系统参数名称</label>
                                <div class="col-sm-10">
                                    <input id="input" type="text" class="form-control" placeholder="系统参数名称">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-lg-2">系统参数编码</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" placeholder="系统参数编码">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-lg-2">系统参数值</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" placeholder="系统参数值">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-lg-2">系统参数类型</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" placeholder="系统参数类型">
                                </div>
                            </div>
                        </form>
                    </div>
<!--                    <div class="modal-footer">-->
<!--                        <button type="button" id="modal" class="btn btn-default" data-dismiss="modal">关闭-->
<!--                        </button>-->
<!--                        <button type="button" class="btn btn-primary">-->
<!--                            提交更改-->
<!--                        </button>-->
<!--                    </div>-->
                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>
    </section>
</section>

<!-- js placed at the end of the document so the pages load faster -->
<script src="../js/jquery.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/jquery.scrollTo.min.js"></script>
<script src="../js/jquery.nicescroll.js" type="text/javascript"></script>


<!--common script for all pages-->
<script src="../js/common-scripts.js"></script>

<script src="https://www.layuicdn.com/layui-v2.5.5/layui.js"></script>

<script>

    layui.use('table', function(){
        var table = layui.table;

        table.render({
            elem: '#test'
            // ,url:'/test/table/demo1.json'
            ,title: '用户数据表'
            ,cols: [[
                {type: 'checkbox'},
                {field: '序号', title: 'ID',}
                , {field: '参数名称', title: '参数名称'}
                , {field: '参数编码', title: '参数编码',}
                , {field: '参数值', title: '参数值'}
                , {field: '参数类型', title: '参数类型'}
                , {field: '参数状态', title: '参数状态'}
                , {field: '操作', title: '操作', width: 240, toolbar: '#barDemo'}
            ]],
            data: [
                {
                    "序号": 10000,
                    "name": "user-0",
                    "参数编码": "user-0",
                    "参数值": "女",
                    "参数值": "女",
                    "参数类型": "女",
                    "参数状态": "女",
                },
            ]
            ,page: true
        });

        //监听行工具事件
        table.on('tool(test)', function(obj){
            var data = obj.data;
            //console.log(obj)
            if(obj.event === 'del'){
                layer.confirm('真的删除行么', function(index){
                    obj.del();
                    layer.close(index);
                });
            } else if(obj.event === 'edit'){

                layer.open({
                    //layer提供了5种层类型。可传入的值有：0（信息框，默认）1（页面层）2（iframe层）3（加载层）4（tips层）
                    type:1,
                    title:"修改用户信息",
                    area: ['60%'],
                    btn: ['关闭', '确认修改',],
                    closeBtn: 1, //不显示关闭按钮
                    content:$("#myModal2").html(),
                });
                setFormValue(data);//动态向表单赋值
                // layer.alert('编辑行：<br>'+ JSON.stringify(data))
            }
        });
    });

    function setFormValue(data){
        $("input[name=id]").attr("value",data.id);
        $("input[name=sysName]").val(data.sysName);
        $("input[name=sysKey]").val(data.sysKey);
        $("input[name=sysValue]").val(data.sysValue);
        $("input[name=type]").val(data.type);
    }

    /**
     * 修改表单数据
     */
    function editData(){
        var id =$("input[name=id]").val();
        //var sysName1 =$("input[name=sysName]").val();
        layer.msg($(":input[name='sysName']").val())
        return;
        if(sysName==""){
            layer.msg("请输入参数名称！！")
            $("input[name=sysName]").focus()
            return
        }

        var sysKey =$("input[name=sysKey]").val();

        if(sysKey==""){
            layer.msg("请输入参数编码！！")
            $("input[name=sysKey]").focus()
            return
        }

        var sysValue=$("input[name=sysValue]").val();
        if(sysValue==""){
            layer.msg("请输入参数值！！")
            $("input[name=sysValue]").focus()
            return
        }
        var type= $("input[name=type]").val();
        if(type==""){
            layer.msg("请输入参数类型！！")
            $("input[name=type]").focus()
            return
        }

        $.ajax({
            url:  "/param/update",
            type: "POST",
            data:{
                id:id,
                sysName:sysName,
                sysKey:sysKey,
                sysValue:sysValue,
                type:type
            },
            cache:false,
            dataType: "json",
            success: function(data){
                layer.msg(data.message);
                if(data.code=="0"){
                    setTimeout("javascript:location.href='/param'", 1500);
                }
            },
            error:function(err){
                layer.msg("服务器内部错误！")
            }
        });

    }



    // function setFormValue(data){
    //     layui.use(['form', 'layedit', 'laydate'], function(){
    //         var form = layui.form
    //         console.log(data)
    //         form.val('example', {
    //             "序号": data.序号// "name": "value"
    //             ,"name": data.name
    //             ,"参数编码": 1
    //             ,"caigoudanwei": data.标签编号 //复选框选中状态
    //             ,"close": true //开关状态
    //             ,"sex": "女"
    //             ,"desc": "我爱 layui"
    //         });
    //         form.render(null,'example')
    //     })
    //
    //
    //
    // }

</script>

</body>
</html>
