<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Mosaddek">
    <meta name="keyword" content="FlatLab, Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
    <link rel="shortcut icon" href="../img/favicon.html">

    <title>设备分类管理</title>

    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/bootstrap-reset.css" rel="stylesheet">
    <!--external css-->
    <link href="../assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <!-- Custom styles for this template -->
    <link href="../css/style.css" rel="stylesheet">
    <link href="../css/style-responsive.css" rel="stylesheet" />

    <link rel="stylesheet" href="https://www.layuicdn.com/layui-v2.5.5/css/layui.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 tooltipss and media queries -->
    <style>
        .layui-form.layui-border-box.layui-table-view.treeTable{
            height: auto!important;
        }
        .layui-table-body.layui-table-main{
            height: auto!important;
        }
    </style>


    <!--[if lt IE 9]>


    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->
</head>

<body>

<section id="container" class="">
    <!--header start-->
    <header class="header white-bg">
        <div class="sidebar-toggle-box">
            <div data-original-title="Toggle Navigation" data-placement="right" class="icon-reorder tooltips"></div>
        </div>
        <!--logo start-->
        <a href="#" class="logo" >Flat<span>lab</span></a>
        <!--logo end-->
        <div class="top-nav ">
            <ul class="nav pull-right top-menu">
                <li>
                    <input type="text" class="form-control search" placeholder="Search">
                </li>
                <!-- user login dropdown start-->
                <li class="dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                        <img alt="" src="../img/avatar1_small.jpg">
                        <span class="username">Jhon Doue</span>
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu extended logout">

                        <li><a href="../login.html"><i class="icon-key"></i> Log Out</a></li>
                    </ul>
                </li>
                <!-- user login dropdown end -->
            </ul>
        </div>
    </header>
    <!--header end-->
    <!--sidebar start-->
    <aside>
        <div id="sidebar"  class="nav-collapse ">
            <!-- sidebar menu start-->
            <ul class="sidebar-menu">
                <li class="">
                    <a class="" href="../index.html">
                        <i class="icon-dashboard"></i>
                        <span>首页</span>
                    </a>
                </li>
                <li class="sub-menu">
                    <a href="javascript:;" class="">
                        <i class="icon-book"></i>
                        <span>设备管理</span>
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub">
                        <li><a class="" href="../label/general.html">设备信息管理</a></li>
                        <li><a class="" href="../label/buttons.html">设备标签管理</a></li>
                        <li><a class="" href="../label/widget.html">设备贴标</a></li>
                    </ul>
                </li>
                <li class="sub-menu">
                    <a href="javascript:;" class="">
                        <i class="icon-cogs"></i>
                        <span>线缆管理</span>
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub">
                        <li><a class="" href="../label2/grids.html">线缆信息管理</a></li>
                        <li><a class="" href="../label2/calendar.html">线缆标签管理</a></li>
                        <li><a class="" href="../label2/charts.html">线缆贴标</a></li>
                    </ul>
                </li>
                <li class="sub-menu">
                    <a href="javascript:;" class="">
                        <i class="icon-tasks"></i>
                        <span>任务管理</span>
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub">
                        <li><a class="" href="../task/form_component.html">盘点任务</a></li>
                        <li><a class="" href="../task/form_wizard.html">调拨任务</a></li>
                        <li><a class="" href="../task/form_validation.html">借用任务</a></li>
                        <li><a class="" href="../task/form_task.html">维修任务</a></li>
                        <li><a class="" href="../task/tabledetail.html">报废任务</a></li>
                    </ul>
                </li>
                <li class="sub-menu">
                    <a href="javascript:;" class="">
                        <i class="icon-th"></i>
                        <span>日志管理</span>
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub">
                        <li><a class="" href="../log/basic_table.html">盘点任务日志</a></li>
                        <li><a class="" href="../log/basic_table2.html">调拨任务日志</a></li>
                        <li><a class="" href="../log/basic_table3.html">借用任务日志</a></li>
                        <li><a class="" href="../log/basic_table4.html">维修任务日志</a></li>
                        <li><a class="" href="../log/basic_table5.html">操作日志</a></li>
                        <li><a class="" href="../log/basic_table6.html">告警日志</a></li>
                    </ul>
                </li>
                <li class="sub-menu active">
                    <a href="javascript:;" class="">
                        <i class="icon-glass"></i>
                        <span>系统管理</span>
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub">
                        <li><a class="" href="../system/blank.html">账号管理</a></li>
                        <li><a class="" href="../system/role.html">角色管理</a></li>
                        <li><a class="" href="../system/menu.html">菜单管理</a></li>
                        <li><a class="" href="../system/anti.html">参数设置</a></li>
                        <li><a class="" href="../system/profile.html">机构管理</a></li>
                        <li><a class="" href="../system/invoice.html">机房管理</a></li>
                        <li><a class="" href="../system/jjmangt.html">机架管理</a></li>
                        <li class="active"><a class="" href="../system/fenclass.html">设备分类管理</a></li>
                        <li><a class="" href="../system/lablemangt.html">标签管理</a></li>
                        <li><a class="" href="../system/3djfang.html">3D机房</a></li>
                        <li><a class="" href="../404.html">404 Error</a></li>
                        <li><a class="" href="../500.html">500 Error</a></li>
                    </ul>
                </li>
                <li>
                    <a class="" href="../login.html">
                        <i class="icon-user"></i>
                        <span>登 录</span>
                    </a>
                </li>
            </ul>
            <!-- sidebar menu end-->
        </div>
    </aside>
    <!--sidebar end-->
    <!--main content start-->
    <section id="main-content">
        <section class="wrapper">
            <!-- page start-->
            <div class="row">
                <div class="col-lg-12">
                    <section class="panel">
                        <header class="panel-heading">
                            设备分类管理
                        </header>
                    </section>
                </div>
            </div>
            <div class="row-fulid">
                <button class="btn btn-info"><a href="./ext/addgroup.html" style="color: #fff">拓展信息配置</a> </button>
            </div>
            <div class="row" style="margin:15px 0">
                <div class="col-md-12">

                    <div class="dBody">
                        <table class="layui-hidden" id="treeTable" lay-filter="treeTable"></table>
                    </div>

                </div>
            </div>

            <!-- page end-->
        </section>
    </section>
    <!--main content end-->
</section>

<!-- js placed at the end of the document so the pages load faster -->
<script src="../js/jquery.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/jquery.scrollTo.min.js"></script>
<script src="../js/jquery.nicescroll.js" type="text/javascript"></script>
<script src="../assets/jquery-knob/js/jquery.knob.js"></script>

<!--common script for all pages-->
<script src="../js/common-scripts.js"></script>


<script src="https://www.layuicdn.com/layui-v2.5.5/layui.js"></script>







<script>
    var editObj=null,ptable=null,treeGrid=null,tableId='treeTable',layer=null;
    layui.config({
        base: '../js/design/extend/'
    }).extend({
        treeGrid:'treeGrid'
    }).use(['jquery','treeGrid','layer'], function(){
        var $=layui.jquery;
        treeGrid = layui.treeGrid;//很重要
        layer=layui.layer;
        ptable=treeGrid.render({
            id:tableId
            ,elem: '#'+tableId
            // ,url:'./json/treeData.json'
            ,cellMinWidth: 100
            ,idField:'id'//必須字段
            ,treeId:'id'//树形id字段名称
            ,treeUpId:'pId'//树形父id字段名称
            ,treeShowName:'name'//以树形式显示的字段
            ,heightRemove:[".dHead",10]//不计算的高度,表格设定的是固定高度，此项不生效
            ,height:'400px'
            ,isFilter:false
            ,iconOpen:true//是否显示图标【默认显示】
            ,isOpenDefault:true//节点默认是展开还是折叠【默认展开】
            ,loading:true
            ,method:'post'
            ,isPage:false
            ,cols: [[

                {type:'checkbox',sort:true}
                ,{field:'id', title: 'id'}
                ,{field:'name', title: '水果名称'}

                ,{field:'pId', title: 'pid',edit:'text'}
                ,{width:100,title: '操作', align:'center'/*toolbar: '#barDemo'*/
                    ,templet: function(d){
                        var html='';
                        var addBtn='<a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="add">添加</a>';
                        var delBtn='<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>';
                        return addBtn+delBtn;
                    }
                }
            ]],
            data:[
                {"id":"113", "pId":0,  "name":"植物(自定义图标)","lay_icon_open":"/img/1_open.png","lay_icon_close":"/img/1_close.png"},
                {"id":"114", "pId":"113",  "name":"大叶榕(自定义图标)","lay_icon":"/img/4.png"},
                {"id":"112", "pId":null,  "name":"动物(默认单选)","lay_is_radio":true},
                {"id":"115", "pId":"112",  "name":"大笨象"},
                {"id":"1", "pId":null,  "name":"水果"},
                {"id":"101", "pId":"1","name":"苹果","lay_is_open":false},
                {"id":"102", "pId":"1", "name":"香蕉"},
                {"id":"103", "pId":"1", "name":"梨"},
                {"id":"104", "pId":"101", "name":"红富士苹果"},
                {"id":"105", "pId":"101", "name":"红星苹果"},
                {"id":"106", "pId":"101", "name":"嘎拉"},
                {"id":"107", "pId":"101", "name":"桑萨"},
                {"id":"108", "pId":"102", "name":"千层蕉（禁止多选）","lay_che_disabled":true},
                {"id":"109", "pId":"102", "name":"仙人蕉","lay_is_checked":true},
                {"id":"110", "pId":"102", "name":"吕宋蕉(禁止单选)","lay_is_checked":true,"lay_rad_disabled":true},
                {"id":"111", "pId":"1", "name":"大西瓜","lay_is_open":false},



                {"id":"1000", "pId":"111", "name":"大西瓜[1000]"},
                {"id":"1001", "pId":"111", "name":"大西瓜[1001]"},
                {"id":"1002", "pId":"111", "name":"大西瓜[1002]"},
                {"id":"1003", "pId":"111", "name":"大西瓜[1003]"},
                {"id":"1004", "pId":"111", "name":"大西瓜[1004]"},
                {"id":"1005", "pId":"111", "name":"大西瓜[1005]"},
                {"id":"1006", "pId":"111", "name":"大西瓜[1006]"},
                {"id":"1007", "pId":"111", "name":"大西瓜[1007]"},
                {"id":"1008", "pId":"111", "name":"大西瓜[1008]"},
                {"id":"1009", "pId":"111", "name":"大西瓜[1009]"},
                {"id":"1010", "pId":"111", "name":"大西瓜[1010]"},
                {"id":"1011", "pId":"111", "name":"大西瓜[1011]"},
                {"id":"1012", "pId":"111", "name":"大西瓜[1012]"},
                {"id":"1013", "pId":"111", "name":"大西瓜[1013]"},
                {"id":"1014", "pId":"111", "name":"大西瓜[1014]"},
                {"id":"1015", "pId":"111", "name":"大西瓜[1015]"},
                {"id":"1016", "pId":"111", "name":"大西瓜[1016]"},
                {"id":"1017", "pId":"111", "name":"大西瓜[1017]"},
                {"id":"1018", "pId":"111", "name":"大西瓜[1018]"},
                {"id":"1019", "pId":"111", "name":"大西瓜[1019]"},
                {"id":"1020", "pId":"111", "name":"大西瓜[1020]"},
                {"id":"1021", "pId":"111", "name":"大西瓜[1021]"},
                {"id":"1022", "pId":"111", "name":"大西瓜[1022]"},
                {"id":"1023", "pId":"111", "name":"大西瓜[1023]"},
                {"id":"1024", "pId":"111", "name":"大西瓜[1024]"},
                {"id":"1025", "pId":"111", "name":"大西瓜[1025]"},
                {"id":"1026", "pId":"111", "name":"大西瓜[1026]"},
                {"id":"1027", "pId":"111", "name":"大西瓜[1027]"},
                {"id":"1028", "pId":"111", "name":"大西瓜[1028]"},
                {"id":"1029", "pId":"111", "name":"大西瓜[1029]"},
                {"id":"1030", "pId":"111", "name":"大西瓜[1030]"},
                {"id":"1031", "pId":"111", "name":"大西瓜[1031]"},
                {"id":"1032", "pId":"111", "name":"大西瓜[1032]"},
                {"id":"1033", "pId":"111", "name":"大西瓜[1033]"},
                {"id":"1034", "pId":"111", "name":"大西瓜[1034]"},
                {"id":"1035", "pId":"111", "name":"大西瓜[1035]"},
                {"id":"1036", "pId":"111", "name":"大西瓜[1036]"},
                {"id":"1037", "pId":"111", "name":"大西瓜[1037]"},
                {"id":"1038", "pId":"111", "name":"大西瓜[1038]"},
                {"id":"1039", "pId":"111", "name":"大西瓜[1039]"},
                {"id":"1040", "pId":"111", "name":"大西瓜[1040]"},
                {"id":"1041", "pId":"111", "name":"大西瓜[1041]"},
                {"id":"1042", "pId":"111", "name":"大西瓜[1042]"},
                {"id":"1043", "pId":"111", "name":"大西瓜[1043]"},
                {"id":"1044", "pId":"111", "name":"大西瓜[1044]"},
                {"id":"1045", "pId":"111", "name":"大西瓜[1045]"},
                {"id":"1046", "pId":"111", "name":"大西瓜[1046]"},
                {"id":"1047", "pId":"111", "name":"大西瓜[1047]"},
                {"id":"1048", "pId":"111", "name":"大西瓜[1048]"},
                {"id":"1049", "pId":"111", "name":"大西瓜[1049]"},
                {"id":"1050", "pId":"111", "name":"大西瓜[1050]"},
                {"id":"1051", "pId":"111", "name":"大西瓜[1051]"},
                {"id":"1052", "pId":"111", "name":"大西瓜[1052]"},
                {"id":"1053", "pId":"111", "name":"大西瓜[1053]"},
                {"id":"1054", "pId":"111", "name":"大西瓜[1054]"},
                {"id":"1055", "pId":"111", "name":"大西瓜[1055]"},
                {"id":"1056", "pId":"111", "name":"大西瓜[1056]"},
                {"id":"1057", "pId":"111", "name":"大西瓜[1057]"},
                {"id":"1058", "pId":"111", "name":"大西瓜[1058]"},
                {"id":"1059", "pId":"111", "name":"大西瓜[1059]"},
                {"id":"1060", "pId":"111", "name":"大西瓜[1060]"},
                {"id":"1061", "pId":"111", "name":"大西瓜[1061]"},
                {"id":"1062", "pId":"111", "name":"大西瓜[1062]"},
                {"id":"1063", "pId":"111", "name":"大西瓜[1063]"},
                {"id":"1064", "pId":"111", "name":"大西瓜[1064]"},
                {"id":"1065", "pId":"111", "name":"大西瓜[1065]"},
                {"id":"1066", "pId":"111", "name":"大西瓜[1066]"},
                {"id":"1067", "pId":"111", "name":"大西瓜[1067]"},
                {"id":"1068", "pId":"111", "name":"大西瓜[1068]"},
                {"id":"1069", "pId":"111", "name":"大西瓜[1069]"},
                {"id":"1070", "pId":"111", "name":"大西瓜[1070]"},
                {"id":"1071", "pId":"111", "name":"大西瓜[1071]"},
                {"id":"1072", "pId":"111", "name":"大西瓜[1072]"},
                {"id":"1073", "pId":"111", "name":"大西瓜[1073]"},
                {"id":"1074", "pId":"111", "name":"大西瓜[1074]"},
                {"id":"1075", "pId":"111", "name":"大西瓜[1075]"},
                {"id":"1076", "pId":"111", "name":"大西瓜[1076]"},
                {"id":"1077", "pId":"111", "name":"大西瓜[1077]"},
                {"id":"1078", "pId":"111", "name":"大西瓜[1078]"},
                {"id":"1079", "pId":"111", "name":"大西瓜[1079]"},
                {"id":"1080", "pId":"111", "name":"大西瓜[1080]"},
                {"id":"1081", "pId":"111", "name":"大西瓜[1081]"},
                {"id":"1082", "pId":"111", "name":"大西瓜[1082]"},
                {"id":"1083", "pId":"111", "name":"大西瓜[1083]"},
                {"id":"1084", "pId":"111", "name":"大西瓜[1084]"},
                {"id":"1085", "pId":"111", "name":"大西瓜[1085]"},
                {"id":"1086", "pId":"111", "name":"大西瓜[1086]"},
                {"id":"1087", "pId":"111", "name":"大西瓜[1087]"},
                {"id":"1088", "pId":"111", "name":"大西瓜[1088]"},
                {"id":"1089", "pId":"111", "name":"大西瓜[1089]"},
                {"id":"1090", "pId":"111", "name":"大西瓜[1090]"},
                {"id":"1091", "pId":"111", "name":"大西瓜[1091]"},
                {"id":"1092", "pId":"111", "name":"大西瓜[1092]"},
                {"id":"1093", "pId":"111", "name":"大西瓜[1093]"},
                {"id":"1094", "pId":"111", "name":"大西瓜[1094]"},
                {"id":"1095", "pId":"111", "name":"大西瓜[1095]"},
                {"id":"1096", "pId":"111", "name":"大西瓜[1096]"},
                {"id":"1097", "pId":"111", "name":"大西瓜[1097]"},
                {"id":"1098", "pId":"111", "name":"大西瓜[1098]"},
                {"id":"1099", "pId":"111", "name":"大西瓜[1099]"},
                {"id":"1100", "pId":"111", "name":"大西瓜[1100]"}
            ]

            ,parseData:function (res) {//数据加载后回调
                return res;
            }
            ,onClickRow:function (index, o) {
                console.log(index,o,"单击！");
                //msg("单击！,按F12，在控制台查看详细参数！");
            }
            ,onDblClickRow:function (index, o) {
                console.log(index,o,"双击");
                msg("双击！,按F12，在控制台查看详细参数！");
            }
            ,onCheck:function (obj,checked,isAll) {//复选事件
                console.log(obj,checked,isAll,"复选");
                msg("复选,按F12，在控制台查看详细参数！");
            }
            ,onRadio:function (obj) {//单选事件
                console.log(obj,"单选");
                msg("单选,按F12，在控制台查看详细参数！");
            }
        });

        treeGrid.on('tool('+tableId+')',function (obj) {
            if(obj.event === 'del'){//删除行
                del(obj);
            }else if(obj.event==="add"){//添加行
                add(obj);
            }
        });
        treeGrid.on('edit(treeTable)',function (obj) {

            if(obj.name !== '' && obj.pId !== ''){
                console.log(obj)
            }
        })
    });

    function del(obj) {
        layer.confirm("你确定删除数据吗？如果存在下级节点则一并删除，此操作不能撤销！", {icon: 3, title:'提示'},
            function(index){//确定回调
                obj.del();
                layer.close(index);
            },function (index) {//取消回调
                layer.close(index);
            }
        );
    }

    var i=1000000;
    //添加
    function add(pObj) {
        var pdata=pObj?pObj.data:null;
        var param={};
        param.name='水果'+Math.random();
        param.id=++i;
        param.pId=pdata?pdata.id:null;
        treeGrid.addRow(tableId,pdata?pdata[treeGrid.config.indexName]+1:0,param);
    }







    //knob
    // $(".knob").knob();



</script>


</body>
</html>
